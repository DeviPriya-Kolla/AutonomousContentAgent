# .github/workflows/run_agent.yml

name: Run Content Strategist Agent

on:
  # Schedule to run every hour, on the hour
  schedule:
    - cron: '0 * * * *'
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  run-agent:
    runs-on: ubuntu-latest # Use a standard Linux virtual machine
    
    steps:
      # 1. Get the code from your repository
      - name: Check out repository code
        uses: actions/checkout@v4
        
      # 2. Set up the Python version
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' # Use the Python version you developed with
          
      # 3. Install the necessary libraries
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          
      # 4. Run the agent script
      - name: Run Python Agent
        # This 'env' block makes your GitHub Secret available as an environment variable
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }} 
        run: python agent.py